@import 'variables';
@import '//populr.me/assets/developers/populr_mixins.less';
@import 'lesshat';
@import 'grid';

@import 'normalize.css';
@import 'icons';
@import 'OpenSans';

@columns: 12;
@column-width: 40;
@gutter-width: 20;
@total-width: 100%;
@border-radius: 10px;

@white: #fff;
@light-gray: #828282;
@dark-gray: #333333;
@lighter-custom-color: desaturate(lighten(@custom-color, 35%), 10%);
@darker-custom-color: darken(desaturate(@custom-color, 19%), 9%);
@darkest-custom-color: darken(desaturate(@custom-color, 13%), 19%);

@baseline: 21px;
@normal-font-size: 14px;
@large-font-size: 15px;
@header-font-size: 24px;
@large-header-font-size: 27px;
@title-font-size: 35px;

/* MIXINS */
#populr > .link-button();
#populr > .icon();
#populr > .inline-logo-title();

.text-shadow() {
  text-shadow: 1px 1px 1px rgba(0,0,0,0.61);
}

.clearfix() {
  zoom: 1;
  &:after {
    display: block;
    visibility: hidden;
    height: 0;
    clear: both;
    content: ".";
  }
}

.font-bold() {
  font-family: 'OpenSansBold', 'Lucida Sans Unicode', 'Lucida Grande', Arial, sans-serif;
  font-weight: normal;
}

.font-italic() {
  font-family: 'OpenSansItalic', 'Lucida Sans Unicode', 'Lucida Grande', Arial, sans-serif;
}

.font-bold-italic() {
  font-family: 'OpenSansBoldItalic', 'Lucida Sans Unicode', 'Lucida Grande', Arial, sans-serif;
}

.text-color-light-dark() when (luma(@custom-color) >= 75%) {
  color: @dark-gray;
}

.text-color-light-dark() when (luma(@custom-color) < 75%) {
  color: @white;
}

.text-color (@text-background) when (luma(@text-background) > 75%) {
  color: #333;
}
.text-color (@text-background) when (luma(@text-background) =< 75%) {
  color: #fff;
  text-shadow: 1px 2px 1px rgba(0,0,0,.35);
}
 
.link-colors (@text-background) when (luma(@custom-color) > 75%) {
  color: darken(saturate(@custom-color, 50%), 50%);
  &:active { color: darken(saturate(@custom-color, 50%), 20%); }
}
.link-colors (@text-background) when (luma(@custom-color) =< 75%) and (luma(@text-background) > 75%) {
  color: @custom-color;
  &:active { color: lighten(@custom-color, 20%); }  
}
.link-colors (@text-background) when (luma(@custom-color) =< 75%) and (luma(@text-background) =< 75%) {
  color: #fff;
  &:active { color: mix(@custom-color, @white, 20%); }
}

/* BASIC */
body {
  font-family: 'OpenSansRegular', 'Lucida Sans Unicode', 'Lucida Grande', Arial, sans-serif;
  font-size: @normal-font-size;
  line-height: @baseline;
  font-weight: normal;
  color: @dark-gray;
  background-color: @white;
  margin: 0 !important;
}

p, h1, h2, h3 {
  padding: 0;
  margin: 0;
}

h1 {
  line-height: @baseline * 2;
}

h2, h3 {
  font-size: @header-font-size;
  line-height: 1.2;
}

.asset-title, #pop-title {
  font-family: @headline-font-family;
  font-weight: @headline-font-weight;
  // i, em {
  //   font-family: 'OpenSansSemiBoldItalic', 'Lucida Sans Unicode', 'Lucida Grande', Arial, sans-serif !important;
  // }
}

.asset-title {
  margin-bottom: @baseline * 0.5;
  padding-top: @baseline * 0.5;
}

.asset-type-text, .asset-type-documentgroup, .asset-type-imagegroup.asset-size-1, .asset-type-imagegroup.asset-size-2, .asset-type-embedgroup.asset-size-1, .asset-type-embedgroup.asset-size-2 {
  .asset-title {
    padding-top: 0;
  }
}

a {
  color: @custom-color;
  text-decoration: underline;
}

b, strong {
  .font-bold();
}

b i,
i b,
strong i,
i strong,
b em,
em b,
strong em,
em strong {
  .font-bold();
}

ul, ol {
  margin: 0 0 0 @baseline / 2;
  padding-left: @baseline / 2;
}

button, .btn {
  border: 0;
  .border-radius(@border-radius);
  background: @darkest-custom-color;
  line-height: @baseline;
  cursor: pointer;
  text-decoration: none;
  .transition(~'background 80ms ease-in-out');
  padding: 4px 8px;
  display: inline-block;
  &.btn-large {
    padding: 8px 10px;
  }
  &:hover {
    background: @darker-custom-color;
  }
  .text-color-light-dark();
}

body {
  text-align: center;
}

#pop {
  .clearfix();
  padding-bottom: @baseline * 2;
}

.columnizer-row {
  text-align: center;
}

.columnizer-row-inner {
  margin: 0 auto;
  padding: @baseline * 2 0;
  width: 740px - unit(@gutter-width, px);
  .clearfix();
  text-align: left;
}

.columnizer-row:nth-child(even) {
  background-color: @custom-color;
  .text-color-light-dark();
  a {
    .text-color-light-dark();
  }
}

/* IE */
.lt-ie9 {
  .columnizer-row.even {
    background-color: @custom-color;
    .text-color-light-dark();
    a {
      .text-color-light-dark();
    }
  }
}
/* /IE */

.columnizer-col1 {.column(12, 12);}
.columnizer-col2 {.column( 6, 12);}
.columnizer-col3 {.column( 4, 12);}


#header {
  margin: 0 auto;
  text-align: left;
  width: 740px - unit(@gutter-width * 2, px);
  position: relative;
  .clearfix();
  padding: 0;
}


.has-logo #header, .has-title #header {
  padding: @baseline;
}


#pop-title {
  padding: 0;
  margin: 0;
  font-size: @title-font-size;
  line-height: 1.1;
  text-align: left;
}

#pop-links {
  margin: 0;
  padding: 0;
  position: fixed;
  top: @baseline * 3;
  right: 0;
  text-align: center;
  padding: unit(@gutter-width / 2, px);
  background: @darker-custom-color;
  .border-radius(@border-radius 0 0 @border-radius);
  .clearfix();
  li {
    display: block;
    margin: 5px -2px 0 0;
    list-style: none;
    &:first-child {
      margin-top: 0;
    }
  }
}
.lt-ie9 #pop-links li { display: block; }

#pop-sharing {
  margin: 30px auto;
}

.columnizer-row:first-child {
  .text-color(#fff);
  a { .link-colors(#fff); }
}

.white-background-fill {
    padding: @baseline;
    // line-height: @baseline * 1.15;
    .border-radius(@border-radius);
    background-color: @white;  
}

.columnizer-row:first-child {
  .asset-type-text, .asset-type-documentgroup .document-text { .white-background-fill; }
  .asset-type-imagegroup, .asset-type-embedgroup {
    &.asset-size-1, &.asset-size-2 {
      .asset-title, .description { .white-background-fill; }
    }
    &.asset-size-3 .text {
      .white-background-fill;
      margin-top: 10px;
      padding-top: @baseline / 2;
    }
  }
}

.asset-type-imagegroup img {
  z-index: 1;
  position: relative;
  .border-radius(@border-radius);
}

.asset-type-imagegroup, .asset-type-embedgroup {
  &.asset-size-1, &.asset-size-2 {
    .description { margin-top: @baseline / 2; }
  }
}

.header-image {
  .row(12);
  .text {
    .column(7, 12);
    background: @white;
    .border-radius(@border-radius / 2);
    margin-top: @baseline * 4;
    font-size: @large-font-size;
    line-height: @baseline * 1.15;
  }
  .text-inner {
    padding: @baseline;
  }
  .asset-title {
    font-size: @large-header-font-size;
    padding-top: 0;
  }
  .populr-image-slider {
    .column(5, 12);
    img {
      .border-radius(@border-radius);
    }
  }
}

.columnizer-row-contents-imagegroup-imagegroup-imagegroup {
  .slide {
    min-height: 147px;
    overflow: hidden;
  }
}

.js .populr-image-slider .slide a.cumberland-icon-magnify {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  z-index: 100;
  text-align: center;
  vertical-align: middle;
  font-size: 55px;
  text-decoration: none;
  color: @white;
  opacity: 0;
  .transition(~'opacity 80ms ease-in-out');
  text-shadow: 0 0 3px rgba(0,0,0,0.6);
  text-indent: -9999;
  &:hover {
    text-indent: 0;
    opacity: 100;
  }
}

.ie .cumberland-icon-magnify {
  width: 100%;
  height: 100%;
  background: transparent url("@{base-url}/images/pixel.gif") repeat top left;
  text-indent: -9999px;
  &:hover {
    text-indent: 0;
  }
}

.documents, .documents li {
  list-style: none;
  padding: 0;
  margin: 0;
  &:before {
    content: "";
    display: none;
  }
}

.documents {
   margin-top: @baseline;
}

.asset-type-documentgroup {
  .documents li {
    background: @darker-custom-color;
    margin-top: @baseline;
    .text-color-light-dark();
    .border-radius(@border-radius);
    a {
      display: block;
      .clearfix();
      .box-sizing(border-box);
      width: 100%;
      padding: unit(@gutter-width, px);
      text-decoration: none;
      .text-color-light-dark();
    }
    .cumberland-icon-file {
      float: left;
      font-size: 36px;
    }

    .meta {
      float: left;
      margin-left: 15px;
      margin-top: -2px;
      p {
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }

    .title {
      .font-bold();
    }

    .download {
      float: right;
      white-space: nowrap;
      text-transform: uppercase;
      .font-bold();
      .cumberland-icon-download {
        vertical-align: middle;
        font-size: 25px;
        line-height: @baseline;
      }
      .btn:hover {
        background-color: @darker-custom-color;
      }
    }

    &:hover {
      background-color: @darkest-custom-color;
      .download .btn {
        background-color: @darker-custom-color;
      }
    }
  }
}
.lt-ie9 {
  .asset-type-documentgroup .documents li {
    a { width: auto; }
    .meta { margin-left: 5px; }
  }
  .download-spacing { display: none; }
  .cumberland-icon-download, .cumberland-icon-file { display: none; }
  .asset-type-documentgroup.asset-size-3 .documents li a {
    .meta { width: auto; }
    .download { display: none; }
  }
}
.download-text-ie {
  display: none;
  .lt-ie9 & { display: inline; }
}

.asset-type-documentgroup.asset-size-1 .documents li .meta {
  width: 456px;
}

.asset-type-documentgroup.asset-size-2 .documents li .meta {
  width: 189px;
}

.asset-type-documentgroup.asset-size-3 .documents li .meta {
  margin-left: 0;
  width: 120px;
}

.body, .description {
  .lt-ie9 & { ul, ol { margin-left: 15px; } }
  li { margin: 7px 0; }
}

#populr > #image-slider-themes > .basic(@arrow-color: @white, @bg-color: @custom-color);

@media screen and (max-width: 860px) {
  #pop {
    padding-bottom: 0 !important;
  }

  #pop-links {
    position: relative;
    width: auto;
    padding: 0;
    .box-sizing(border-box);
    & .addthis_button_facebook_like {width: auto;}
    margin: 30px auto;
    top: auto !important;
    background: transparent;
    .border-radius(0);
    li {
      display: inline-block;
      margin: 0 3px;
    }
  }
}


@media screen and (max-width: 752px) {
  
  #populr > .mobile-reset();

  body {
    margin: 0;
    padding: 0;
  }
  
  #header {
    width: auto;
  }

  #main-region, #meta {
    width: auto;
    .box-sizing(border-box);
  }

  .columnizer-row {
    width: auto !important;
    margin: 0 0 0 0 !important;
    padding: 0;
  }

  .columnizer-row-inner {
    .box-sizing(border-box);
    padding: @baseline * 2 @baseline;
    width: auto;
  }

  .columnizer-col {
    display: block !important;
    margin: @baseline * 2 0 0 0 !important;
    &:first-child {
      margin-top: 0 !important;
    }
  }

  .columnizer-row:first-child.columnizer-row-contents-imagegroup {
    width: 100% !important;
    margin: auto !important;
    .columnizer-col {
      .asset:after {
        display: none !important;
      }
      .img {
      }
      .bg {
      }
      .text {
        position: relative !important;
        background: fade(@custom-color, 100%) !important;
        bottom: auto;
      }
    }
  }

  .columnizer-row:first-child .asset-type-imagegroup.asset-size-1 {
    width: 100% !important;
    margin: auto !important;
  }

  .js .populr-image-slider .slide a.cumberland-icon-magnify:hover { .opacity(0); }

  .documents .meta {
    white-space: nowrap;
    max-width: 59% !important;
  }
  .download-text { display: none; }
  .documents li .meta { width: auto !important; }

  .js .populr-image-slider .slide a:hover {
    .opacity(0);
  }

  .header-image {
    .clearfix();
    .row(12);
    width: 100%;
    .text {
      display: block !important;
      width: 100% !important;
      margin-top: 0 !important;
    }
    .populr-image-slider {
      display: block !important;
      width: 100% !important;
      margin-top: @baseline !important;
    }
  }
}

@media screen and (max-width: 752px) {
  h1#pop-title { font-size: 32px !important; }
  .asset-title { font-size: 22px !important; }
}
